<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TorpTCG | Riftbound Specialists & Custom Prints</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="cards-styles.css">
    <link rel="stylesheet" href="inventory-styles.css">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>

<body>

    <!-- NAVIGATION -->
    <nav>
        <div class="logo">TORPTCG</div>
        <div class="nav-links">
            <a href="#products">Shop</a>
            <a href="#services">Bespoke Models</a>
            <a href="#contact">Contact</a>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <div class="hero">
        <h1>Enter the Rift</h1>
        <p>The UK's Premier Destination for Riftbound TCG, Sealed Product, and Bespoke 3D Accessories.</p>
        <a href="#products" class="btn">Explore the Collection</a>
    </div>

    <!-- MAIN PRODUCT SECTION -->
    <div class="container" id="products">
        <h2 class="section-title">New Arrivals</h2>

        <!-- Filter Buttons -->
        <div class="filters">
            <button class="filter-btn active" onclick="filterProducts('all')">All</button>
            <button class="filter-btn" onclick="filterProducts('singles')">Singles</button>
            <button class="filter-btn" onclick="filterProducts('sealed')">Sealed</button>
            <button class="filter-btn" onclick="filterProducts('accessories')">Accessories</button>
            <button class="filter-btn" onclick="filterProducts('prints')">3D Prints</button>
        </div>

        <!-- Out of Stock Toggle -->
        <div class="stock-toggle-container"
            style="display: flex; justify-content: center; align-items: center; gap: 10px; margin: 20px 0;">
            <label class="toggle-switch">
                <input type="checkbox" id="show-out-of-stock" onchange="toggleOutOfStock()">
                <span class="toggle-slider"></span>
            </label>
            <span style="color: var(--text-muted); font-size: 0.9rem;">Show out-of-stock items</span>
        </div>

        <!-- Show Filters Button (for Singles) -->
        <div id="show-filters-container" style="display: none; text-align: center; margin: 20px 0;">
            <button class="btn-secondary" id="toggle-search" onclick="toggleCardSearch()">
                ▼ Show Filters
            </button>
        </div>

        <!-- Card Search Panel (Hidden by default) -->
        <div id="card-search-panel" style="display: none;">
            <div class="search-panel">
                <h3 class="section-title" style="font-size: 1.5rem; margin-bottom: 30px;">Search & Filter Cards</h3>

                <!-- Search Inputs -->
                <div class="search-grid">
                    <!-- Name Search -->
                    <div class="search-field">
                        <label for="search-name">Card Name</label>
                        <input type="text" id="search-name" placeholder="Search by name...">
                    </div>

                    <!-- ID/Public Code Search -->
                    <div class="search-field">
                        <label for="search-id">Card ID / Code</label>
                        <input type="text" id="search-id" placeholder="e.g., 56, ogn-056...">
                    </div>

                    <!-- Ability Text Search -->
                    <div class="search-field full-width">
                        <label for="search-ability">Ability Text</label>
                        <input type="text" id="search-ability" placeholder="Search ability text...">
                    </div>

                    <!-- Energy Range -->
                    <div class="search-field">
                        <label for="energy-min">Energy (Min - Max)</label>
                        <div class="range-inputs">
                            <input type="number" id="energy-min" placeholder="Min" min="0" max="10">
                            <span>-</span>
                            <input type="number" id="energy-max" placeholder="Max" min="0" max="10">
                        </div>
                    </div>

                    <!-- Might Range -->
                    <div class="search-field">
                        <label for="might-min">Might (Min - Max)</label>
                        <div class="range-inputs">
                            <input type="number" id="might-min" placeholder="Min" min="0" max="10">
                            <span>-</span>
                            <input type="number" id="might-max" placeholder="Max" min="0" max="10">
                        </div>
                    </div>

                    <!-- Card Type Dropdown -->
                    <div class="search-field">
                        <label for="filter-type">Card Type</label>
                        <select id="filter-type">
                            <option value="">All Types</option>
                            <option value="unit">Unit</option>
                            <option value="spell">Spell</option>
                            <option value="gear">Gear</option>
                            <option value="rune">Rune</option>
                        </select>
                    </div>

                    <!-- Rarity Dropdown -->
                    <div class="search-field">
                        <label for="filter-rarity">Rarity</label>
                        <select id="filter-rarity">
                            <option value="">All Rarities</option>
                            <option value="common">Common</option>
                            <option value="uncommon">Uncommon</option>
                            <option value="rare">Rare</option>
                            <option value="epic">Epic</option>
                            <option value="showcase">Showcase</option>
                        </select>
                    </div>

                    <!-- Domain Dropdown -->
                    <div class="search-field">
                        <label for="filter-domain">Domain</label>
                        <select id="filter-domain">
                            <option value="">All Domains</option>
                            <option value="calm">Calm</option>
                            <option value="chaos">Chaos</option>
                            <option value="fury">Fury</option>
                            <option value="mind">Mind</option>
                            <option value="body">Body</option>
                            <option value="order">Order</option>
                        </select>
                    </div>

                    <!-- Set Dropdown -->
                    <div class="search-field">
                        <label for="filter-set">Card Set</label>
                        <select id="filter-set">
                            <option value="">All Sets</option>
                            <option value="OGN">Origins</option>
                            <option value="SFD">Spiritforged</option>
                        </select>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="search-actions">
                    <button class="btn" id="apply-card-filters">Apply Filters</button>
                    <button class="btn-secondary" id="reset-card-filters">Reset</button>
                    <span class="results-count" id="card-results-count">Loading...</span>
                </div>
            </div>
        </div>

        <!-- Product Grid -->
        <div class="product-grid" id="product-container">
            <!-- Products injected via script.js -->
        </div>
    </div>

    <!-- SERVICES SECTION -->
    <div class="services-section" id="services">
        <div class="container">
            <h2 class="section-title">Hobbyist 3D Printing</h2>
            <div style="display: flex; flex-wrap: wrap; gap: 50px; align-items: center;">
                <div style="flex: 1; min-width: 300px;">
                    <h3 style="color: var(--accent); margin-bottom: 20px; font-size: 1.8rem;">Bring Your Ideas to
                        Life
                    </h3>
                    <p style="margin-bottom: 20px; color: var(--text-muted);">
                        Looking for custom deck boxes, dice towers, or unique tabletop accessories? I offer FDM 3D
                        printing services for fellow hobbyists and TCG enthusiasts.
                    </p>
                    <ul style="margin-bottom: 30px; list-style: none;">
                        <li style="margin-bottom: 10px;">✨ Custom Deck Boxes & Storage</li>
                        <li style="margin-bottom: 10px;">✨ Dice Towers & Rolling Trays</li>
                        <li style="margin-bottom: 10px;">✨ Card Holders & Organizers</li>
                        <li style="margin-bottom: 10px;">✨ Durable FDM Printing</li>
                    </ul>
                    <a href="#contact" class="btn">Request a Quote</a>
                </div>
                <div style="flex: 1; min-width: 300px;">
                    <img src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?auto=format&fit=crop&w=800&q=80"
                        alt="3D Printing"
                        style="width: 100%; border-radius: 16px; border: 1px solid var(--glass-border); box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                </div>
            </div>
        </div>
    </div>

    <!-- CONTACT FORM -->
    <div class="container" id="contact">
        <h2 class="section-title">Contact Us</h2>
        <div style="max-width: 600px; margin: 0 auto;">
            <p style="text-align: center; margin-bottom: 30px; color: var(--text-muted);">
                Looking for a specific card or want to commission a print? Drop us a message.
            </p>

            <form name="contact" method="POST" data-netlify="true" netlify-honeypot="bot-field" class="contact-form"
                style="background: var(--bg-card); padding: 40px; border-radius: 16px; border: 1px solid var(--glass-border);">

                <!-- Honeypot field -->
                <p style="display: none;">
                    <label>Don't fill this out if you're human: <input name="bot-field" /></label>
                </p>

                <input type="hidden" name="form-name" value="contact" />

                <div class="form-group">
                    <label>Name</label>
                    <input type="text" name="name" required placeholder="Your Name">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>Enquiry Type</label>
                    <select name="enquiry-type">
                        <option value="stock">Stock Request</option>
                        <option value="notify">Notify Me (Out of Stock)</option>
                        <option value="commission">3D Print Commission</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Message</label>
                    <textarea name="message" rows="5" placeholder="Tell us what you need..."></textarea>
                </div>
                <button type="submit" class="btn" style="width: 100%;">Send Message</button>
            </form>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <h3>TORPTCG LTD</h3>
        <p>Specialists in Riftbound & Tabletop Accessories</p>
        <div class="legal-text">
            <p>&copy; 2024 TorpTCG. All rights reserved.</p>
            <p>Riftbound™ is a trademark of its respective owners. We are an independent retailer.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="cards-script.js"></script>
    <script>
        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => {
                if (!user) {
                    window.netlifyIdentity.on("login", () => {
                        document.location.href = "/admin/";
                    });
                }
            });
        }
    </script>
</body>

</html>